<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="volunteerMapper">

	<select id="getListCount" resultType="_int">
		select count(*)
		from board
		where board_status='Y'
	</select>
	
	<select id="selectList" resultMap="volboardResultSet">
		select board_no, board_title, board_content, board_view, board_create_date, board_modify_date, cate_no,
				board_status, board_writer, list
		from board
		    left join category using (cate_no)
		where board_status='Y'
		order by board_no desc
	</select>
	
	<resultMap type="VolunteerBoard" id="volboardResultSet"> 
		<id property="volId" column="BOARD_NO"/>
		<result property="volTitle" column="BOARD_TITLE"/>
		<result property="volContent" column="BOARD_CONTENT"/>
		<result property="volCount" column="BOARD_VIEW"/>
		<result property="volCategory" column="LIST"/>
		<result property="volCreateDate" column="BOARD_CREATE_DATE"/>
		<result property="volModifyDate" column="BOARD_MODIFY_DATE"/>
		<result property="volStatus" column="BOARD_STATUS"/>
		<result property="volCateNo" column="CATE_NO"/>
		<result property="volWriter" column="BOARD_WRITER"/>
	</resultMap> 
	<!-- join한 것도 resultMap에 포함시켜야 함 -->

	
	<!-- <insert id="insertBoard">
		insert into board
		values(SEQ_BNO.nextval, #{volTitle}, #{volContent}, 0, sysdate, sysdate, default, 3, #{volWriter});)
	</insert> -->
	
	<update id="addReadCount">
		update board
		set BOARD_VIEW = BOARD_VIEW + 1
		where BOARD_NO = #{volId}
	</update>
	
	<select id="selectVolBoard" parameterType="_int" resultMap="volboardResultSet">
		select *
		from board
		WHERE board_status='Y' and BOARD_NO = #{volId}
	</select> 
</mapper>